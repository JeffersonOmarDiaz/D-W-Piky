<app-menu paginaTitulo="Solicitudes" [menuCliente]="verMC" *ngIf="rolDuenio"></app-menu>


<ion-content *ngIf="rolDuenio">
  <!-- creada con el objetivo de mostrar en dos seciones nuevos es historial  -->
  <!-- <div class="m-3">
    <ion-segment mode="ios" (ionChange)="changeSegment($event)" value="nuevos">
      <ion-segment-button value="nuevos">
        <ion-label class="normal">Nuevos</ion-label>
      </ion-segment-button>
      <ion-segment-button value="culminados">
        <ion-label class="normal">Culminados</ion-label>
      </ion-segment-button>
    </ion-segment>
  </div>

  <div *ngIf="nuevos">
    <ion-card >
      <ion-item *ngFor="let solicitud of solicitudes">
        <ion-label class="normal">
          <p>Fecha: {{solicitud.fecha.seconds*1000 | date}}</p>
          Hora: {{solicitud.fecha.seconds*1000 | date:'shortTime'}}
          <p>Mascotas: {{solicitud.numMascotas}}</p>
          <p>Tiempo: {{solicitud.tiempo}} horas  Pago$ {{solicitud.valor}} </p>
        </ion-label>
      </ion-item>
    </ion-card>
  </div>

  <div *ngIf="!nuevos">
    <ion-card >
      <ion-item *ngFor="let solicitud of solicitudesCulmida">
        <ion-label class="normal">
          Fecha: {{solicitud.fecha.seconds*1000 | date:'short'}}
          <p>Mascotas: {{solicitud.mascotasPaseo}}</p>
          <p>Tiempo: {{solicitud.tiempo}} horas  Pago$ {{solicitud.valor}} </p>
        </ion-label>
      </ion-item>
      
    </ion-card>
  </div> -->

  <div>
  
    <ion-item *ngFor="let solicitud of solicitudes">
      <ion-label class="normal">
        Hora: {{solicitud.fecha.seconds*1000 | date:'shortTime'}}
        <p>Fecha: {{solicitud.fecha.seconds*1000 | date}}</p>
        <p>Mascotas: {{solicitud.numMascotas}}</p>
        <p>Tiempo: {{solicitud.tiempo}} horas Pago$ {{solicitud.valor}} </p>
      </ion-label>
    </ion-item>
  
    <ion-grid *ngIf="btnCancelarVisible">
      <ion-card>
        <ion-row class="ion-justify-content-center">
          <ion-col>
          <!-- <ion-item> -->
            <ion-label>Aumentar valor a $: </ion-label>
          <!-- </ion-item> -->
          <ion-button class="aceptarValor" (click)="subirOferta(adcional1)">{{adcional1}}</ion-button>
          <ion-button class="aceptarValor" (click)="subirOferta(adcional2)">{{adcional2}}</ion-button>
          <ion-button class="aceptarValor" (click)="subirOferta(adcional3)">{{adcional3}}</ion-button>
          </ion-col>
        </ion-row>
      </ion-card>
      <ion-row class="ion-justify-content-center">
        <ion-col size="7">
          <ion-button expand="block" shape="round" (click)="cancelarSolicitud()">Cancelar Solicitud</ion-button>
        </ion-col>
      </ion-row>
    </ion-grid>
  </div>

  <div *ngIf="btnCancelarVisible">
    <ion-card>
      <ion-card-header>
        <ion-card-title style="text-align: center;">Paseadores Interesados</ion-card-title>
      </ion-card-header>
      <!-- <ion-card-content> -->
        <!-- <ion-button (click)="getOfertasPaseo()">Id de la solicitud</ion-button> -->
        <ion-item *ngFor="let oferta of ofertas" (click)="paseadorInteresado(oferta)">
          <ion-grid fixed>
            <ion-row>
              <ion-col size="6">
                <img src={{oferta.paseador.foto}} class="imgRedonda" onerror="this.src='../../../assets/images/icons/nofotoerfil.png'">
                <ion-label class="normal; ion-text-wrap">
                  {{oferta.paseador.nombre}} {{oferta.paseador.apellido}}</ion-label>
              </ion-col>
              <ion-col size="6">
                <ion-label class="normal; ion-text-wrap">
                  {{oferta.paseador.nombre}} {{oferta.paseador.apellido}}
                  <br>
                  Aceptará por $ {{oferta.valor}}
                  <br>
                  Hora: {{oferta.fecha.seconds*1000 | date:'shortTime'}}
                  <p>Fecha: {{oferta.fecha.seconds*1000 | date}}</p>
                </ion-label>
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-item>
      <!-- </ion-card-content> -->
    </ion-card>
  </div>

  <div *ngIf="!btnCancelarVisible">
    <ion-card>
      <ion-col size="6">
          <h3>No tiene solicitudes pendientes, genere una en la sección <a routerLink="/quiero-paseo" routerDirection="root">"Quiero un paseo"</a></h3>
      </ion-col>
  </ion-card>
  </div>
</ion-content>
